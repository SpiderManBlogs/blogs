(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1458],{52757:function(Ze,M,u){"use strict";u.r(M),u.d(M,{default:function(){return fe}});var be=u(57338),H=u(25084),Ce=u(22385),J=u(61580),Fe=u(57663),k=u(71577),w=u(2824),y=u(11849),ye=u(34792),m=u(48086),h=u(3182),N=u(94043),l=u.n(N),Q=u(73171),X=u(49101),F=u(67294),q=u(62747),_=u(85224),ee=u(16894),U=u(37476),$=u(5966),D=u(90672),re=u(12826),i=u(85893),ae=function(r){var n=(0,F.useRef)();return(0,F.useEffect)(function(){var s;(s=n.current)===null||s===void 0||s.resetFields()},[r.updateModalVisible]),(0,i.jsxs)(U.Y,{title:"\u4FEE\u6539\u5206\u7C7B",width:"400px",formRef:n,visible:r.updateModalVisible,onFinish:function(e){r.onSubmit(e)},onVisibleChange:function(e){e||r.onCancel()},initialValues:{code:r.values.code,name:r.values.name,memo:r.values.memo},children:[(0,i.jsx)($.Z,{width:"md",label:"\u5206\u7C7B\u7F16\u7801",name:"code",disabled:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6863\u6848\u7F16\u7801"}]}),(0,i.jsx)($.Z,{width:"md",label:"\u5206\u7C7B\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6863\u6848\u540D\u79F0"}]}),(0,i.jsx)(D.Z,{label:"\u5907\u6CE8",width:"xl",name:"memo",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6863\u6848\u63CF\u8FF0"}],placeholder:"\u8BF7\u8F93\u5165\u6863\u6848\u63CF\u8FF0\u4FE1\u606F"})]})},ne=ae,j=u(21010);function ue(t,r){return T.apply(this,arguments)}function T(){return T=(0,h.Z)(l().mark(function t(r,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.WY)("/api/classification/queryPages",(0,y.Z)({method:"GET",params:(0,y.Z)({},r)},n||{})));case 1:case"end":return e.stop()}},t)})),T.apply(this,arguments)}function te(t,r){return x.apply(this,arguments)}function x(){return x=(0,h.Z)(l().mark(function t(r,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.WY)("/api/classification/save",(0,y.Z)({data:r,method:"POST"},n||{})));case 1:case"end":return e.stop()}},t)})),x.apply(this,arguments)}function se(t,r){return E.apply(this,arguments)}function E(){return E=(0,h.Z)(l().mark(function t(r,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.WY)("/api/classification/save",(0,y.Z)({data:r,method:"POST"},n||{})));case 1:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function we(t,r){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,n){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/classification/delete",_objectSpread({data:r,method:"POST"},n||{})));case 1:case"end":return e.stop()}},t)})),B.apply(this,arguments)}function le(t,r){return P.apply(this,arguments)}function P(){return P=(0,h.Z)(l().mark(function t(r,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.WY)("/api/classification/enable?id="+r,(0,y.Z)({method:"POST"},n||{})));case 1:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function ie(t,r){return V.apply(this,arguments)}function V(){return V=(0,h.Z)(l().mark(function t(r,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.WY)("/api/classification/unenable?id="+r,(0,y.Z)({method:"POST"},n||{})));case 1:case"end":return e.stop()}},t)})),V.apply(this,arguments)}var de=function(){var t=(0,h.Z)(l().mark(function r(n){var s,e;return l().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=m.default.loading("\u6B63\u5728\u6DFB\u52A0"),c.prev=1,c.next=4,se((0,y.Z)({},n));case 4:if(e=c.sent,s(),e.status!=="ok"){c.next=11;break}return m.default.success("\u6DFB\u52A0\u6210\u529F"),c.abrupt("return",!0);case 11:return m.default.error(e.error_msg),c.abrupt("return",!1);case 13:c.next=20;break;case 15:return c.prev=15,c.t0=c.catch(1),s(),m.default.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),c.abrupt("return",!1);case 20:case"end":return c.stop()}},r,null,[[1,15]])}));return function(n){return t.apply(this,arguments)}}(),ce=function(){var t=(0,h.Z)(l().mark(function r(n,s){var e,p;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=m.default.loading("\u6B63\u5728\u914D\u7F6E"),a.prev=1,s.name=n.name,s.memo=n.memo,a.next=6,te((0,y.Z)({},s));case 6:if(p=a.sent,e(),p.status!=="ok"){a.next=13;break}return m.default.success("\u914D\u7F6E\u6210\u529F"),a.abrupt("return",!0);case 13:return m.default.error(p.error_msg),a.abrupt("return",!1);case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(1),e(),m.default.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 22:case"end":return a.stop()}},r,null,[[1,17]])}));return function(n,s){return t.apply(this,arguments)}}(),O=function(){var t=(0,h.Z)(l().mark(function r(n,s){var e,p;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=m.default.loading("\u6B63\u5728\u914D\u7F6E"),a.prev=1,!s){a.next=8;break}return a.next=5,le(n);case 5:p=a.sent,a.next=11;break;case 8:return a.next=10,ie(n);case 10:p=a.sent;case 11:if(e(),p.status!=="ok"){a.next=17;break}return m.default.success("\u914D\u7F6E\u6210\u529F"),a.abrupt("return",!0);case 17:return m.default.error(p.error_msg),a.abrupt("return",!1);case 19:a.next=26;break;case 21:return a.prev=21,a.t0=a.catch(1),e(),m.default.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 26:case"end":return a.stop()}},r,null,[[1,21]])}));return function(n,s){return t.apply(this,arguments)}}(),W=function(){var t=(0,h.Z)(l().mark(function r(n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.default.error("\u4E0D\u652F\u6301\u5220\u9664");case 1:case"end":return e.stop()}},r)}));return function(n){return t.apply(this,arguments)}}(),oe=function(){var r=(0,F.useRef)(),n=(0,F.useState)(!1),s=(0,w.Z)(n,2),e=s[0],p=s[1],c=(0,F.useState)(!1),a=(0,w.Z)(c,2),me=a[0],A=a[1],he=(0,F.useState)(!1),Y=(0,w.Z)(he,2),pe=Y[0],I=Y[1],g=(0,F.useRef)(),ve=(0,F.useState)(),G=(0,w.Z)(ve,2),Z=G[0],R=G[1],ge=(0,F.useState)([]),L=(0,w.Z)(ge,2),S=L[0],K=L[1],z=[{title:"\u5206\u7C7B\u7F16\u7801",dataIndex:"code",tip:"\u5206\u7C7B\u7F16\u7801\u662F\u552F\u4E00\u7684 key",render:function(f,d){return(0,i.jsx)("a",{onClick:function(){R(d),I(!0)},children:f})}},{title:"\u5206\u7C7B\u540D\u79F0",dataIndex:"name",valueType:"textarea"},{title:"\u5907\u6CE8",dataIndex:"memo",valueType:"textarea"},{title:"\u542F\u7528\u72B6\u6001",dataIndex:"enable",hideInForm:!0,valueEnum:{true:{text:"\u542F\u7528",status:!0},false:{text:"\u505C\u7528",status:!1}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(f,d){var b=[(0,i.jsx)("a",{onClick:function(){A(!0),R(d)},children:"\u914D\u7F6E"},"config")];return d.enable?b.push((0,i.jsx)("a",{onClick:function(){var o=O(d.id,!1);o&&g.current&&g.current.reload()},children:"\u505C\u7528"},"stop")):(b.push((0,i.jsx)("a",{onClick:function(){var o=O(d.id,!0);o&&g.current&&g.current.reload()},children:"\u542F\u7528"},"start")),b.push((0,i.jsx)(J.Z,{title:"\u5220\u9664",children:(0,i.jsx)(k.Z,{type:"link",shape:"circle",danger:!0,icon:(0,i.jsx)(Q.Z,{}),onClick:function(){W(d).then(function(o){o&&g.current&&g.current.reload()})}})}))),b}}];return(0,i.jsxs)(q.ZP,{children:[(0,i.jsx)(ee.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:g,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,i.jsxs)(k.Z,{type:"primary",onClick:function(){var d;(d=r.current)===null||d===void 0||d.resetFields(),p(!0)},children:[(0,i.jsx)(X.Z,{})," \u65B0\u5EFA"]},"primary")]},request:ue,columns:z,rowSelection:{onChange:function(f,d){K(d)}}}),(S==null?void 0:S.length)>0&&(0,i.jsx)(_.Z,{extra:(0,i.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,i.jsx)("a",{style:{fontWeight:600},children:S.length})," ","\u9879 \xA0\xA0"]}),children:(0,i.jsx)(k.Z,{onClick:(0,h.Z)(l().mark(function v(){var f,d;return l().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,W(S);case 2:K([]),(f=g.current)===null||f===void 0||(d=f.reloadAndRest)===null||d===void 0||d.call(f);case 4:case"end":return C.stop()}},v)})),children:"\u6279\u91CF\u5220\u9664"})}),(0,i.jsxs)(U.Y,{title:"\u65B0\u5EFA\u5206\u7C7B",width:"400px",formRef:r,visible:e,onVisibleChange:p,initialValues:{code:"",name:"",memo:""},onFinish:function(){var v=(0,h.Z)(l().mark(function f(d){var b;return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,de(d);case 2:b=o.sent,b&&(p(!1),g.current&&g.current.reload());case 4:case"end":return o.stop()}},f)}));return function(f){return v.apply(this,arguments)}}(),children:[(0,i.jsx)($.Z,{width:"md",label:"\u5206\u7C7B\u7F16\u7801",name:"code",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6863\u6848\u7F16\u7801"}]}),(0,i.jsx)($.Z,{width:"md",label:"\u5206\u7C7B\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6863\u6848\u540D\u79F0"}]}),(0,i.jsx)(D.Z,{label:"\u5907\u6CE8",width:"xl",name:"memo",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6863\u6848\u63CF\u8FF0"}],placeholder:"\u8BF7\u8F93\u5165\u6863\u6848\u63CF\u8FF0\u4FE1\u606F"})]}),(0,i.jsx)(ne,{onSubmit:function(){var v=(0,h.Z)(l().mark(function f(d){var b;return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ce(d,Z);case 2:b=o.sent,b&&(A(!1),R(void 0),g.current&&g.current.reload());case 4:case"end":return o.stop()}},f)}));return function(f){return v.apply(this,arguments)}}(),onCancel:function(){A(!1),R(void 0)},updateModalVisible:me,values:Z||{}}),(0,i.jsx)(H.Z,{width:600,visible:pe,onClose:function(){R(void 0),I(!1)},closable:!1,children:(Z==null?void 0:Z.name)&&(0,i.jsx)(re.Z,{column:2,title:Z==null?void 0:Z.name,request:(0,h.Z)(l().mark(function v(){return l().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",{data:Z||{}});case 1:case"end":return d.stop()}},v)})),params:{id:Z==null?void 0:Z.name},columns:z})})]})},fe=oe}}]);
